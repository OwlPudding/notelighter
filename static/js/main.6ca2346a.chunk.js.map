{"version":3,"sources":["components/DocViewer.js","App.js","index.js","../node_modules/pdfjs-dist/build sync"],"names":["DocViewer","props","initDraw","canvas","self","pos","document","querySelector","getBoundingClientRect","rectCount","state","selections","pageNumber","length","mouse","x","y","startX","startY","element","onmousemove","e","ev","window","event","pageX","pageY","clientX","clientY","setMousePosition","children","style","width","Math","abs","height","left","top","onclick","target","className","mc","createElement","type","el","appendChild","focus","onblur","this","value","removeChild","relem","backgroundColor","id","key","push","setState","addEventListener","keyCode","blur","cursor","setAttribute","selected","color","oncontextmenu","splice","prevPage","nextPage","numPages","controls","name","timestamps","onDocumentLoadSuccess","bind","_pdfInfo","temp","i","getElementById","map","control","flex","onClick","sendData","position","file","notes","onLoadSuccess","inputRef","ref","myPage","innerWidth","React","Component","App","screen","files","bpm","rehearse","duration","audio","god","godentry","start","time","undefined","groups","sum","item","m","parseInt","nm","console","log","ml","nextStart","forEach","currentTime","godArray","Object","keys","row","group","flat","ontimeupdate","querySelectorAll","rect","scrollTo","play","onDrop","acceptedFiles","getRootProps","getInputProps","find","src","URL","createObjectURL","placeholder","timename","marginLeft","marginRight","stamp","ReactDOM","render","webpackEmptyContext","req","Error","code","resolve","module","exports"],"mappings":"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","file":"static/js/main.6ca2346a.chunk.js","sourcesContent":["import React from \"react\";\nimport { Button, Input } from \"antd\";\nimport { Document, Page } from 'react-pdf/dist/entry.webpack';\n\nexport default class DocViewer extends React.Component {\n  constructor(props) {\n    super(props);\n    this.controls = [\n      { name: \"Measure\", color: \"#65F2D55E\" },\n      { name: \"Rest\", color: \"#EF626C5E\" },\n      { name: \"Repeat\", color: \"#FFE8A25E\" },\n      { name: \"Other\", color: \"#76C3D55E\" }\n    ];\n    this.state = {\n      numPages: null,\n      pageNumber: 1,\n      selected: this.controls[0],\n      selections: null,\n      timestamps: []\n    };\n    this.onDocumentLoadSuccess = this.onDocumentLoadSuccess.bind(this);\n  }\n  \n  async onDocumentLoadSuccess (e) {\n    const numPages = e._pdfInfo.numPages;\n    let temp = {};\n    for (let i = 0; i < numPages; i++) temp[i+1] = [];\n    await this.setState({\n      numPages: numPages,\n      selections: temp\n    });\n    this.initDraw(document.getElementById('canvas'));\n  }\n  initDraw = canvas => {\n    const self = this;\n    const pos = document.querySelector(\"#canvas\").getBoundingClientRect();\n    let rectCount = self.state.selections[self.state.pageNumber].length;\n    let mouse = {\n      x: 0,\n      y: 0,\n      startX: 0,\n      startY: 0\n    };\n    let element = null;\n\n    function setMousePosition(e) {\n      const ev = e || window.event; //Moz || IE\n      if (ev.pageX) { //Moz\n        mouse.x = ev.pageX - pos.x;\n        mouse.y = ev.pageY - pos.y;\n      } else if (ev.clientX) { //IE\n        mouse.x = ev.clientX - pos.x;\n        mouse.y = ev.clientY - pos.y;\n      }\n    };\n    canvas.onmousemove = function (e) {\n      setMousePosition(e);\n      if (element !== null && element.children.length === 0) {\n        element.style.width = Math.abs(mouse.x - mouse.startX) + 'px';\n        element.style.height = Math.abs(mouse.y - mouse.startY) + 'px';\n        element.style.left = (mouse.x - mouse.startX < 0) ? mouse.x + 'px' : mouse.startX + 'px';\n        element.style.top = (mouse.y - mouse.startY < 0) ? mouse.y + 'px' : mouse.startY + 'px';\n      }\n    }\n    canvas.onclick = function (e) {\n      rectCount = self.state.selections[self.state.pageNumber].length;\n\n      if (e.target.className === \"measure-count\") {\n      } else if (element !== null) {\n        let mc = document.createElement(\"input\");\n        mc.type = \"number\";\n        mc.className = \"measure-count\";\n        let el = element;\n        \n        element.appendChild(mc);\n        mc.focus();\n\n        mc.onblur = function(e) {\n          if (this.value === \"\") { //User didn't enter a measure count\n            canvas.removeChild(el);\n          }\n          else { //Finished\n            const relem = <div className=\"rectangle\" style={{\n              backgroundColor: element.style.backgroundColor,\n              width: element.style.width,\n              height: element.style.height,\n              left: element.style.left,\n              top: element.style.top\n            }} id={rectCount} key={`${rectCount++}_${this.value}`}>\n              <h1>{this.value}</h1>\n            </div>;\n          \n            let selections = self.state.selections;\n            selections[self.state.pageNumber].push(relem);\n            self.setState({ selections: selections });\n            canvas.removeChild(el);\n          }\n          \n          element = null;\n        };\n        mc.addEventListener(\"keyup\", function(e) {\n          if (e.keyCode === 13) {\n            this.blur();\n          }\n        });\n        \n        canvas.style.cursor = \"default\";\n      }\n      else { //Begin\n        mouse.startX = mouse.x;\n        mouse.startY = mouse.y;\n\n        element = document.createElement('div');\n        element.className = 'rectangle';\n        element.setAttribute(\"id\", rectCount++);\n        element.style.left = mouse.x + 'px';\n        element.style.top = mouse.y + 'px';\n        element.style.backgroundColor = self.state.selected.color;\n\n        canvas.appendChild(element);\n        \n        canvas.style.cursor = \"crosshair\";\n      }\n    }\n    canvas.oncontextmenu = function(e) {\n      if (e.target.className === \"rectangle\") {\n        let selections = self.state.selections;\n        selections[self.state.pageNumber].splice(e.target.id, 1);\n        self.setState({ selections: selections });\n      } else if (e.target.className === \"measure-count\") {\n        e.target.blur();\n      }\n      return false;\n   }\n  }\n  prevPage = () => {\n    this.setState({ pageNumber: this.state.pageNumber - 1 <= 1 ? 1 : this.state.pageNumber - 1 })\n  }\n  nextPage = () => {\n    this.setState({ pageNumber: this.state.pageNumber + 1 >= this.state.numPages ? this.state.numPages : this.state.pageNumber + 1});\n  }\n  render() {\n    return (\n      <div className=\"doc-viewer\">\n        <div className=\"controls\">\n          <div className=\"music-element-container\">\n            { this.controls.map((control, i) => (\n              <div key={i} className=\"music-element\" style={{ flex: 1, backgroundColor: control.color }} onClick={() => this.setState({ selected: control })}>\n                {control.name}\n              </div>\n            )) }\n          </div>\n          <div>\n            <Button onClick={() => {\n              this.props.sendData(this.state.selections, this.prevPage, this.nextPage, this.state.numPages, this.state.pageNumber);\n            }}\n              style={{ position: \"absolute\", top: 75, color: \"maroon\" }}>REHEARSE</Button>\n            <Button onClick={this.prevPage}>Prev. page</Button>\n            <Button onClick={this.nextPage}>Next page</Button>\n          </div>\n        </div>\n        <div className=\"bounds\">\n          <Document\n            file={this.props.notes}\n            onLoadSuccess={this.onDocumentLoadSuccess}\n            className=\"document-container\">\n            <Page pageNumber={this.state.pageNumber} className=\"current-page\" inputRef={(ref) => this.myPage = ref }/>\n          </Document>\n          <div id=\"canvas\" style={{ width: window.innerWidth * 0.9, height: (window.innerWidth * 0.9) * 1.3 }}>\n            { this.state.selections ? this.state.selections[this.state.pageNumber] : ''}\n          </div>\n        </div>\n      </div>\n    );\n  }\n};","import React from 'react';\nimport './App.css';\n\nimport Dropzone from \"react-dropzone\";\nimport { Button, Input } from \"antd\";\n\nimport DocViewer from \"./components/DocViewer\";\n\nexport default class App extends React.Component {\n  state = {\n    screen: \"select\", //\"editor\", \"playback\"\n    files: [],\n    timestamps: [],\n    bpm: null\n  };\n  rehearse = (selections, prevPage, nextPage, numPages, pageNumber) => {\n    const { timestamps } = this.state;\n\n    const duration = this.audio.duration;\n    let god = {};\n    /*\n    1: { start: tp1, duration: tp2 - tp1, nm: number of measures, ml: measure length,  }\n    */\n    // console.log(selections);\n    for (let i = 0; i < numPages; i++) {\n      if (timestamps[i]) {\n        const godentry = i+1;\n        god[godentry] = {\n          start: timestamps[i].time,\n          duration: (timestamps[i+1] === undefined) ? duration - timestamps[i].time : timestamps[i+1].time - timestamps[i].time,\n          //nm: number of measures, ml: measure length\n          groups: []\n        };\n\n        if (selections[i+1].length) {\n          let sum = 0;\n          //let group\n          let groups = selections[i+1].map((item, i) => {\n            const x = item.props.style.left;\n            const y = item.props.style.top;\n            const m = parseInt(item.props.children.props.children);\n            sum += m;\n\n            return { x: x, y: y, nm: m, start: null };\n            // console.log(`Group ${i+1}: ${m} measures`);\n          });\n          console.log('GROUPS:', groups);\n          // console.log(`Page 1 has ${sum} measures in total`);\n          god[godentry].nm = sum;\n          god[godentry].ml = god[godentry].duration / sum;\n          let nextStart = god[godentry].start;\n          groups.forEach((item, i) => {\n            nextStart += (i === 0) ? 0 : item.nm * god[godentry].ml;\n            item.start = nextStart;\n            // return item;\n            // console.log({ ...item, start: nextStart });\n            // return { ...item, start: nextStart };\n            // console.log(`Group ${i+1}: ${m} measures`);\n          });\n          god[godentry].groups = groups;\n          // god[godentry].groups.push(group);\n        }\n      }\n    }\n    // console.log(`${pageNumber} of ${numPages}`);\n    // console.log(god);\n\n    this.audio.currentTime = 0;\n    let godArray = Object.keys(god).map((key, i) => {\n      let row = [];\n      row.push(god[key].start);\n      god[key].groups.forEach(group => row.push({x: group.x, y: group.y, start: group.start}));\n      // console.log(row);\n      return row;\n    });\n    // console.log(godArray.flat());\n    godArray = godArray.flat();\n\n    let i = 0;\n    const self = this;\n    document.getElementById(\"audio\").ontimeupdate = function() {\n      const time = self.audio.currentTime;\n      document.querySelectorAll(\".rectangle\").forEach(rect => rect.children[0].style.color = \"transparent\");\n      if (godArray[i]) {\n        if (godArray[i].y) {\n          if (time >= godArray[i].start) {\n            window.scrollTo( parseInt(godArray[i].x), parseInt(godArray[i].y) );\n            i++;\n          }\n          // console.log(\"NEXT:\",i, godArray[i]);\n        } else {\n          if (time >= godArray[i]) {\n            if (i !== 0) nextPage();\n            i++;\n            // console.log(\"NEXT\", i, godArray[i]);\n          }\n        }\n      }\n    };\n    // console.log(god[1].groups[0]);\n    // window.scrollTo(parseInt(god[1].groups[0].x), parseInt(god[1].groups[0].y));\n    this.audio.play();\n    // while (this.audio.currentTime !== duration) {\n    //   console.log(\"playing\");\n    // }\n  }\n  render() {\n    if (this.state.screen === \"select\") {\n      return (\n        <div className=\"App select\">\n          <h1 className=\"title\">NoteLight</h1>\n          <Dropzone onDrop={acceptedFiles => {\n            this.setState({ files: [...(this.state.files || []), ...acceptedFiles ] });\n          }}>\n            {({getRootProps, getInputProps}) => (\n              <section className=\"dropzone-container\">\n                <div {...getRootProps()} className=\"dropzone\">\n                  <input {...getInputProps()} />\n                  <p>Drag 'n' drop some files here, or click to select files</p>\n                </div>\n                <aside>\n                  <h3>Files:</h3>\n                  <ul>{this.state.files.map(file => <li key={file.name}>{file.name}</li>)}</ul>\n                </aside>\n              </section>\n            )}\n          </Dropzone>\n          <Button\n            onClick={() => this.setState({ screen: \"editor\" })}\n            className={`continue-button${this.state.files.length >= 2 ? \"\" : \" disabled\"}`}>Continue</Button>\n        </div>\n      );\n    } else if (this.state.screen === \"editor\") {\n      const notes = this.state.files.find(file => file.type === \"application/pdf\");\n      const audio = this.state.files.find(file => file.type === \"audio/mpeg\");\n\n      return ( //<DocViewer notes={notes} audio={audio} />\n        <div className=\"App editor\">\n          <div className=\"player-container\">\n            <audio ref={(audio) => { this.audio = audio }} className=\"guide-mp3\" id=\"audio\"\n              src={URL.createObjectURL(audio)} controls type=\"audio/mpeg\" />\n            <Input placeholder=\"Timestamp name...\" ref={(timename) => { this.timename = timename }} style={{ width: \"15%\" }} />\n            <Button onClick={() => {\n              this.setState({ timestamps: [...(this.state.timestamps || []), {\n                name: this.timename.state.value,\n                time: this.audio.currentTime\n              }] });\n            }}>Add timestamp</Button>\n            <Input placeholder=\"bpm...\" ref={(bpm) => { this.bpm = bpm}} style={{ width: \"15%\", marginLeft: 15 }} />\n            <Button onClick={() => this.setState({ bpm: this.bpm.state.value })} style={{ marginRight: 15 }}>Add bpm</Button> { this.state.bpm ? `Set to ${this.state.bpm} bpm` : \"\" }\n            <ul className=\"timestamps\">{ this.state.timestamps.map((stamp, i) => <li key={i}>{stamp.name} - {stamp.time}</li>) }</ul>\n          </div>\n\n          <DocViewer notes={notes} sendData={this.rehearse} />\n        </div>\n      );\n    } else if (this.state.screen === \"playback\") {\n      return <h1>Playback</h1>;\n    } else return \"\";\n  };\n};","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'antd/dist/antd.css';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 47;"],"sourceRoot":""}